<h1>Artifacts for <%= @dig.name %></h1>

<%= link_to "Back to dig", dig_path(@dig) %> |
<%= link_to "New artifact", new_dig_artifact_path %>
<hr />


<% if @dig.dig_participants.find_by(participant_id: current_user.id).role == "lead" || @dig.dig_participants.find_by(participant_id: current_user.id).role == "analyst" %>
  <i><a href="#data-charts">Jump to Data Charts</a></i>
  <hr />
<% end %>

<%= render "search" %>

<div id="artifacts" class="row mx-auto w-65">
  <% @artifacts.each do |artifact| %>
    <%= link_to dig_artifact_path(@dig, artifact) do %>
      <%= render "card", artifact: artifact %>
    <% end %>
  <% end %>
  </div>

  <%= paginate @artifacts %>

  <hr />

  <% if @dig.dig_participants.find_by(participant_id: current_user.id).role == "lead" || @dig.dig_participants.find_by(participant_id: current_user.id).role == "analyst" %>
  <div id="data-charts">
    <h3>Data Visualization</h3>
    <div class="mx-auto w-75">
      <%= pie_chart artifacts_by_category_dig_artifacts_path(@dig) %>
      <p class="d-flex justify-content-center">Artifacts by Category</p>
      <%= column_chart artifacts_by_day_dig_artifacts_path(@dig) %>
      <p class="d-flex justify-content-center">Artifacts by Date Found</p>
    </div>
    <hr />
    <% end %>
  </div>
