<div>
  <div class="mb-2">
    <%= search_form_for [@dig, @q] do |f| %>
      <div class="form-check form-switch">
        <%= f.check_box :poster_id_eq, { class: "form-check-input", role: "switch" }, (params[:q] && params[:q][:poster_id_eq]) || current_user.id, nil  %>
        <%= f.label :poster_id_eq, "Only show artifacts logged by me", class: "form-check-label" %>
      </div>

      <div>
        <%= f.label :description_i_cont, "Filter by description", class: "form-label" %>
        <%= f.text_field :description_i_cont, :placeholder => "Enter a few characters", class: "form-control", type: "search" %>
      </div>

      <div>
        <%= f.label :created_at_gteq, "Logged after" %>
        <%= f.date_field :created_at_gteq %>
      </div>

      <div>
        <%= f.label :created_at_lteq, "Logged before" %>
        <%= f.date_field :created_at_lteq %>
      </div>

      <div>
        <%= f.label :category_eq, "Category" %>
        <% categories = Artifact.where(dig_id: @dig.id).pluck(:category).uniq %>
        <%= f.select :category_eq, options_for_select(categories.map { |cat| [cat.humanize, cat] }, @q.category_eq), { include_blank: true } %>
      </div>

      <div>
        <%= link_to "Clear filters", dig_artifacts_path(@dig) %>
        <%= f.submit :class => "btn btn-outline-secondary mt-2" %>
      </div>
    <% end %>
    <hr/>
  </div>
</div>
